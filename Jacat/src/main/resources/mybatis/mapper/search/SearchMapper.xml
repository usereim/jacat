<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
	<mapper namespace="SearchMapper">

    <select id="searchAll" parameterType="string" resultType="search">
		SELECT board_num,
              	title,
             	content,
           		board_type,
           		NULL AS jmcd
        		FROM boards
        WHERE (title LIKE CONCAT('%', #{keyword}, '%')
		or content LIKE CONCAT('%', #{keyword}, '%'))
		and board_type IN ('F','N')
        UNION all
        SELECT board_num,
               title,
               content,
               board_type,
               NULL AS jmcd
        FROM license_boards
        WHERE title LIKE CONCAT('%', #{keyword}, '%')
           or content LIKE CONCAT('%', #{keyword}, '%')
         UNION all
         SELECT NULL AS board_num,
         		jmfldnm AS title,
         		NULL AS content,
         		'T' AS board_type,
         		jmcd
         FROM license_list
         WHERE jmfldnm LIKE CONCAT('%', #{keyword}, '%')
	</select>
</mapper>
	
	

